---
layout: single
title: "웹 애플리케이션 이해"
categories: [mvc1]
tags: [mvc1, TIL]
toc: true
author_profile: true
---

# ☕ Spring 공부 기록

## 📘 학습 날짜
- 2025-07-17

## 📅 오늘 배운 내용

### ✨ 1. 모든 것이 HTTP

HTTP 메시지에 모든 것을 전송한다.
- HTML , TEXT
- IMAGE,음성,영상,파일
- JSON,XML (API)
- 거의 모든 형태의 데이터 전송 가능
- 서버간에 데이터를 주고 받을 때도 대부분 HTTP 사용
---
### ✨ 2. 웹 서버

- HTTP 기반으로 동작
- 정적 리소스 제공, 기타 부가기능
- 정적 HTML, CSS, JS, 이미지, 영상
- ex) NGINX, APACHE
- 클라이언트가 HTTP 요청 -> 웹 서버가 index.html(정적 리소스) 응답
---
### ✨ 3. 웹 애플리케이션 서버(WAS - Web Application Server)

- HTTP 기반 동작
- 웹 서버 기능 포함 + (정적 리소스 제공 가능)
- 프로그램 코드를 실행해서 애플리케이션 로직 수행
- 동적 HTML, HTTP API(JSON)
- 서블릿, JSP, 스프링 MVC
- ex) 톰캣, Jetty, Undertow
- 클라이언트가 HTTP 요청 -> WAS가 Hello.class에 정의된 로직 수행 후 응답
---
### ✨ 4. 웹 시스템 구성 - WEB, WAS, DB

- 정적 리소스는 웹 서버가 처리
- 웹 서버는 애플리케이션 로직같은 동적인 처리 필요하면 WAS에게 요청 위임
- 효율적인 리소스 관리
- 정적 리소스 많이 사용되면 Web 서버 증설
- 애플리케이션 리소스 많이 사용되면 WAS 증설
- 정적 리소스만 제공하는 웹 서버는 잘 죽지 않음
- 애플리케이션 로직 동작하는 WAS 서버는 잘죽음
- WAS, DB 장애 시 WEB 서버가 오류 화면 제공 가능
---
### ✨ 5. 서블릿
```java
@WebServlet(name = "helloServlet", urlPatterns = "/hello")
public class HelloServlet extends HttpServlet {

    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // 애플리케이션 로직 작성
    }
} 
```
- /hello url 호출 시 서블릿 코드가 실행
- HTTP 요청 정보 편리하게 사용할 수 있는 HttpServletRequest
- HTTP 응답 정보 편리하게 제공할 수 있는 HttpServletResponse
- HTTP 요청 시
- WAS는 Request, Response 객체를 새로 만들어서 서블릿 객체 호출
- 개발자는 Request 객체에서 HTTP 요청 정보를 편리하게 꺼내서 사용
- 개발자는 Response 객체에 HTTP 응답 정보를 편리하게 입력
- WAS는 Response 객체에 담겨있는 내용으로 HTTP 응답 정보를 생성
- 톰캣처럼 서블릿을 지원하는 WAS를 서블릿 컨테이너 라고 한다.
- 서블릿 컨테이너는 서블릿 객체를 생성, 초기화, 호출, 종료하는 생명주기 관리
- 서블릿 객체는 싱글톤으로 관리된다. (공유변수 사용 주의)
- JSP도 서블릿으로 변환되어서 사용
- 동시 요청을 위한 멀티 쓰레드 처리 지원
---
### ✨ 6. 동시 요청 - 멀티 스레드

- 요청마다 스레드 생성의 장점
- 동시 요청 처리 가능, 리소스(CPU,메모리)가 허용할 때 까지 처리 가능
- 하나의 스레드가 지연 되어도, 나머지 스레드는 정상 동작
- 단점은 ? 
- 생성 비용 매우 비쌈
- 컨텍스트 스위칭 비용 발생
- 생성에 제한이 없어서 리소스의 임계점을 넘어 서버 다운 가능
---
#### 6-1. 스레드 풀

- 요청 마다 스레드 생성의 단점 보완
- 필요한 스레드를 스레드 풀에 보관하고 관리
- 생성 가능한 스레드의 최대치를 관리, 톰캣은 최대 200개 기본 설정(변경가능)
- 스레드가 필요하면 이미 생성되어 있는 스레드를 스레드 풀에서 가져다 사용
- 종료하면 스레드 풀에 다시 반납
- 스레드 풀에 스레드 없으면? 기다리는 요청 거절 하거나, 특정 숫자만큼만 대기하도록 설정 가능
- 장점은? 
- 스레드 미리 생성되어 있으므로 스레드 생성 및 종료 비용 절약, 응답 시간 빠름
- 스레드의 생성가능 최대치가 있으므로 너무 많은 요청 들어와도 기존 요청은 안전하게 처리 가능
- 실무 팁!
- WAS의 주요 튜닝 포인트는 최대 스레드 수
- 이 값을 너무 낮게 설정하면? 동시 요청이 많으면, 서버 리소스는 여유롭지만, 클라이언트는 금방 응답 지연
- 높게 설정하면? 동시 요청이 많으면, CPU, 메모리 리소스 임계점 초과로 서버 다운
- 장애 발생시? 
- 클라우드면 일단 서버부터 늘리고 이후에 튜닝
- 클라우드 아니면 열심히 튜닝
---
#### 6-2. 스레드 풀의 적정 숫자
- 어떻게 찾나요?
- 애플리케이션 로직의 복잡도, CPU, 메모리, IO 리소스 상황에 따라 모두 다름
- 최대한 실제 서비스와 유사하게 성능 테스트 시도
- 툴: 아파치 ab, 제이미터, nGrinder
---
#### 6-3. 핵심 WAS의 멀티 스레드 지원

- 멀티 스레드에 대한 부분은 WAS(톰캣)가 처리
- 개발자가 멀티 스레드 관련 코드 신경쓰지 않아도 됨
- 싱글 스레드 프로그래밍을 하듯 편리하게 개발
- 멀티 스레드 환경이므로, 싱글톤 객체(서블릿, 스프링 빈)는 주의해서 사용
---
### ✨ 7. HTML, HTTP API, CSR, SSR

#### 7-1. 정적 리소스

- 고정된 HTML 파일, CSS, JS, 이미지, 영상 등을 제공
- 주로 웹 브라우저
---
#### 7-2.  HTML 페이지
- WAS가 동적으로 필요한 HTML 파일 생성해서 전달
- 클라이언트 웹 브라우저 : HTML 해석
---
#### 7-3. HTTP API
- HTML이 아닌 데이터를 전달
- 주로 JSON 형식
- 다양한 시스템에서 호출
- 데이터만 주고 받고, UI 화면이 필요하면, 클라이언트가 별도 처리
- 앱 클라이언트 to 서버 , 웹 클라이언트 to 서버, 서버 to 서버
- UI 클라이언트 접점 
- 앱 클라이언트
- 웹 브라우저에서 자바 스크립트 통한 HTTP API 호출
- React, Vue.js같은 웹 클라이언트
- 서버 to 서버 -> 주문서버 to 결제서버, 기업간 데이터 통신
---
#### 7-4. 서버 사이드 렌더링(SSR), 클라이언트 사이드 렌더링(CSR)
- SSR : 서버에서 최종 HTML 생성하여 클라이언트에 전달
- CSR: 1. HTML 요청 to 서버 , 서버는 자바 스크립트 링크 보내줌
- 그 다음 2. 웹 브라우저는 자바 스크립트 요청 to 서버, 서버는 자바스크립트 클라이언트 로직, HTML 렌더링 코드 보내줌
- 그 다음 3. 웹 브라우저는 HTTP API 데이터 요청 to 서버, 서버는 JSON으로 응답 보내주고, 받은 데이터를 자바스크립트 로직과 버무려서 HTML 결과 렌더링
---
#### 7-4. 어디까지 알아야 할까?
백엔드 개발자 입장에서 UI 기술...

- 백엔드 : 서버 사이드 렌더링 기술
- JSP, 타임리프
- 화면이 정적이고 복잡하지 않을때 사용
- 서버사이드 렌더링 기술 학습 필수
- 웹 프론트엔드 : 클라이언트 사이드 렌더링 기술
- React,Vue.js
- 복잡하고 동적인 UI 사용
- 프론트엔드 개발자 전문 분야
- 선택과 집중
- 백엔드 개발자의 웹 프론트 엔드 기술 학습은 옵션
- 백엔드 개발자는 서버, DB, 인프라 등등 수 많은 백엔드 기술을 공부해야 한다.
- 웹 프론트엔드도 깊이있게 잘 하려면 숙련에 오랜 시간이 필요하다.
