---
layout: single
title: "백엔드 구성 3요소"
categories: [TIL]
tags: [TIL, TIL]
toc: true
author_profile: true
sidebar:
  nav: "docs"
---

# ✨1. 웹서버

1990년대 웹은 지금처럼 화려한 쇼핌몰이나 소셜미디어가 아니었다.<br>
주로 대학교나 연구소에서 논문,자료같은 문서를 공유하기 위해 사용<br>

> 이때의 문제는.. **이HTML 문서를 지구 반대편에 있는 사람에게 보여줄 수 있나?**<br>
> 이때 등장한것이 바로 Web Server
> 이는 특정 컴퓨터에 설치되어 요청이 오면 컴퓨터에 저장된 파일을 그대로 보내주는 역할! (정적 웹)

 웹서버에는 nginx, Apache 등.. 정적파일을 제공하는 기본기능에 고도로 최적화 되어있다.

---

# ✨2. Web Application Server (WAS)

웹이 점점 고도화되면서 사람들은 더 많은 기능을 원하기 시작하였다. <br>

- 방문자 수 표시 
- 사용자에 따른 다른 정보 표시
- 방명록 제작

But 기존의 웹서버는 미리 만들어진 HTML파일만 제공, 요청에 따라 실시간으로 HTML 생성 불가능했다.
> 이를 해결하기 위해 WAS가 등장하였다. <br>
> 동적인 웹 페이지를 생성하기 위해 탄생하였다. <br>
> 요청에 따라 정해진 코드를 실행하고, 서버가 생각하고, 연산하고, 로직을 처리(백엔드의 탄생)

WAS와 백엔드 프레임워크와의 관계는? <br>

- 둘은 완전히 다름
- 프레임워크는 정교한 설계도와 부품 세트 -> 회원가입, 결제 같은 비즈니스 로직 개발에 도움, 미리 준비된 뼈대와 도구 모음(Spring, Django, FastAPI, Express..)
- WAS는 실제로 움직이게 하는 엔진 -> 개발자가 프레임워크를 이용해 작성한 코드로 실제 서버에서 실행시켜주는 환경 그 자체, WAS 없이는 백엔드 프레임워크 동작 불가능

### 이 둘의 동작 흐름 예시
> 클라이언트가 요청(Raw HTTP 패킷 형태)서버에 전달 -> WAS는 이 원시 HTTP 패킷 해석 후 request 객체 생성 후 프레임 워크에 전달
> -> 백엔드 프레임워크는 URL에 해당하는 컨트롤러 선택 후, Request 객체 통하여 정해진 작업 수행 -> 결과 만들어서 Response 객체 만들어 WAS에 전달
> -> WAS는 다시 원시 HTTP 패킷 형태로 만들어 클라이언트에 전달

현대 백엔드 프레임워크들은 내장 서버 제공(Spring은 내장 톰캣)

**즉 WAS는 동저인 요청이 들어왔을 때, 프레임워크 코드 실행 후 그 결과를 웹 서버에서 돌려주는 역할!**
Apache, Tomcat, jetty, Node.js등 ...

---
# ✨3. 데이터베이스

서버를 껏다 키면 모든 방명록 다 사라지는 문제 발생? 여려명의 사용자들 중에서 마지막으로 하나 남은 상품을 딱 1명에게만 팔리도록 보장? 쇼핑몰의 많은 상품들의 재고를 정확하게 관리해야한다?

이 문제는 메모리나 임시파일로는 해결 불가능!

**이처럼 데이터를 영구적으로 저장하고 안전하게 관리하며 동시접근을 제어하기 위해 DB 등장**

하지만 그냥 파일시스템에 저장하면 안되나? 

> But 파일 시스템은 동시성 제어가 불가능(0.01초 차이로 동시에 버튼을 누른다면?) DB는 lock과 같은 메커니즘으로 일관성 지켜줌.<br>
> 계좌이체는 송금, 수취가 무조건 한 묶음이어야 하고, 하나라도 실패하면 모두 없던 일이 되어야한다. DB는 이런 작업을 트랜잭션 단위로 관리하고, 파일시스템은 이런 데이터의 무결성을 보장하지 못한다.<br>
> 검색 속도! DB는 인덱스 기능 사용


이렇듯 **백엔드의 역사는 문제 해결 과정**이다. 현대 백엔드 시스템의 핵심 철학인 **역할과 책임의 분리**가 백엔드 진화의 기초이디.




