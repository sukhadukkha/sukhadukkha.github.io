---
layout: single
title:  "AWS SAA 준비(CloudFront, Global Accelerator, Snow Family, FSx, Storage Gateway, DataSync, Transfer Family)"
categories: [AWS SAA]
tags: [AWS SAA]
toc: true
author_profile: true
---



## Amazon CloudFront

- 전 세계 사용자에게 정적 및 동적 웹 콘텐츠(예: .html, .css, .js, 이미지, 비디오)를 빠르고 안전하게 전달하는 콘텐츠 전송 네트워크(CDN) 서비스다.
- CloudFront의 핵심 작동 원리
  - CloudFront는 전 세계 곳곳에 배치된 엣지 로케이션(Edge Locations) 네트워크를 사용한다.
  - 사용자 요청: 사용자가 웹사이트에 접속하여 파일을 요청한다.
  - 라우팅: DNS는 사용자와 가장 가까운(지연 시간이 가장 낮은) 엣지 로케이션으로 요청을 보낸다.
  - 캐싱 확인:
    - Cache Hit: 해당 파일이 이미 엣지에 있다면 즉시 반환한다.
    - Cache Miss: 파일이 없다면 오리진(Origin)(예: S3 버킷, EC2, ALB)에서 파일을 가져와 사용자에게 전달하고, 다음 요청을 위해 엣지에 캐싱한다.
- CloudFront vs S3 Cross-Region Replication (CRR)

| 비교 항목 | Amazon CloudFront | S3 Cross-Region Replication (CRR) |
|----------|------------------|----------------------------------|
| 본질 | 캐싱 기반의 콘텐츠 전송 네트워크 (CDN) | 객체 단위의 데이터 복제 (Replication) |
| 작동 방식 | 사용자가 요청할 때 가져옴 (Pull 방식 / On-demand) | 데이터가 생성되면 자동으로 복사함 (Push 방식) |
| 데이터 위치 | 전 세계 400개 이상의 엣지 로케이션 | 설정된 다른 특정 AWS 리전의 버킷 |
| 주요 목적 | 지연 시간 최소화 (성능 향상)<br>서버 부하 분산 | 재해 복구 (DR)<br>규정 준수<br>데이터 근접성 |
| 콘텐츠 유형 | 정적 / 동적 콘텐츠 모두 (캐싱 또는 경로 최적화) | 정적 객체 (파일 자체) |
| 비용 | 데이터 전송량(Out), HTTP 요청 수 | 두 버킷의 스토리지 비용, 리전 간 전송 비용 |


- CloudFront를 사용하는 경우
  - 전 세계 사용자에게 웹 애플리케이션의 응답 속도를 높이고 싶을 때.
  - S3 버킷의 데이터 전송 비용(DTO)을 절감하고 싶을 때. (CloudFront에서 나가는 비용이 S3에서 직접 나가는 비용보다 저렴한 경우가 많다.)
  - DDOS 공격 방어(AWS Shield)나 웹 방화벽(AWS WAF)을 적용하고 싶을 때.
- S3 CRR을 사용하는 경우
  - 재해 복구(DR): 한 리전이 통째로 장애가 나도 다른 리전에서 즉시 서비스를 재개해야 할 때.
  - 컴퓨팅 근접성: 도쿄 리전의 EC2가 서울 리전의 S3 데이터를 자주 읽어야 한다면, 데이터를 도쿄로 복제해 두는 것이 속도와 비용 면에서 유리하다.
  - 법적 요구사항: 데이터를 반드시 물리적으로 떨어진 두 곳 이상의 장소에 보관해야 한다는 규정이 있을 때.
- 두 기능을 조합하는 아키텍처
  - 실무에서는 이 두 가지를 따로 쓰기보다 함께 사용하는 경우가 많다.
  - 기본 구조: 사용자는 CloudFront를 통해 가장 빠른 속도로 데이터를 받는다.
  - 백업 구조: S3 원본 버킷은 CRR을 통해 다른 리전에 실시간 백업된다. 만약 메인 리전에 문제가 생기면, CloudFront의 오리진 설정을 백업 버킷으로 전환하여 서비스 중단 없이 운영한다.
- OAC (Origin Access Control)
  - 원리: S3 버킷은 모든 퍼블릭 액세스를 차단(Block All Public Access)한 상태로 둔다. 대신, CloudFront 서비스 자체가 S3에 접근할 수 있도록 일종의 '전용 신분증'을 부여하고, S3 버킷 정책에서 "이 신분증을 가진 CloudFront만 들어올 수 있다"라고 허용해 주는 방식이다.
  
    
## CloudFront VPC Origin

![구조](/assets/images/VPCOrigin.png)

- CloudFront VPC Origin은 2024년 말에 출시된 비교적 최신 기능으로, CloudFront가 퍼블릭 인터넷을 거치지 않고 VPC 내부의 프라이빗 리소스(ALB, NLB, EC2 등)에 직접 연결할 수 있게 해주는 기능이다.
- 이전에는 S3 외의 커스텀 오리진(ALB 등)을 연결하려면 해당 리소스가 반드시 퍼블릭 서브넷에 있거나 퍼블릭 IP를 가져야 했지만, 이제는 그럴 필요가 없다.
- VPC Origin의 주요 장점
  - 보안 강화 (No Public Exposure)
    - 오직 CloudFront를 통해서만 트래픽이 유입되도록 강제할 수 있다.
  - 아키텍처 단순화
    - 과거 방식: CloudFront가 특정 커스텀 헤더를 실어 보내면, ALB 리스너에서 해당 헤더가 있는지 확인하는 규칙을 수동으로 설정해야 했다.
    - VPC Origin 방식: AWS가 내부적으로 연결을 관리하므로, 이러한 복잡한 헤더 검증 로직 없이도 안전한 연결이 보장된다.

## CloudFront Cache Invalidations

- 만약 S3에 있는 이미지와 index.html 파일을 업데이트 했다.
- CloudFront의 캐시의 TTL은 하루라고 가정했을 때, 이 업데이트를 바로 반영해주지 못한다.
- 그러기 위해서 index.html 및 지정한 파일 경로를 invalidate 할 수 있다.
- 그렇다면 캐시에서 이 파일들이 사라지게되고, Edge Location Cache 안에 이 파일들이 없기 때문에, S3에서 업데이트 된 파일을 가져와서 캐시에 저장하게 된다.


## AWS Global Accelerator

- AWS의 글로벌 네트워크를 활용하여 사용자와 애플리케이션 사이의 경로를 최적화함으로써, 네트워크 성능을 개선하고 가용성을 높여주는 서비스다.
- 작동 원리: 어떻게 빨라지는가?
  - 일반적으로 사용자가 인터넷을 통해 애플리케이션에 접속할 때는 수많은 공용 네트워크(ISP)를 거치며 지연 시간(Latency)과 패킷 손실이 발생한다. Global Accelerator는 이를 다음과 같이 해결한다.
  - 애니캐스트(Anycast) IP: 사용자에게 2개의 정적(Static) IP 주소를 제공한다. 이 IP는 전 세계 어디서든 동일하다.
  - 엣지 로케이션 진입: 사용자의 요청은 가장 가까운 AWS 엣지 로케이션에서 즉시 AWS 네트워크 내부로 진입한다.
  - AWS 백본 네트워크 활용: 데이터는 혼잡한 공용 인터넷 대신, AWS가 직접 관리하는 전용 프라이빗 고속 네트워크를 타고 목적지(ALB, NLB, EC2 등)까지 이동한다.
- 주요 특징 및 장점
  - 고정된 정적 IP: 애플리케이션의 엔드포인트가 바뀌어도 사용자에게 제공한 2개의 IP는 변하지 않는다. 이는 클라이언트 측 방화벽의 화이트리스트(Allowlist) 관리를 매우 단순하게 해준다.
  - 상태 확인 및 빠른 장애 조치(Failover): Global Accelerator는 백엔드 인프라의 상태를 지속적으로 모니터링한다. 만약 특정 리전의 서버에 장애가 발생하면, 수초 내에 정상적인 다른 리전으로 트래픽을 자동 리라우팅한다.
  - 지연 시간 감소: 전용 네트워크를 사용하므로 공용 인터넷 대비 지연 시간을 최대 60%까지 줄일 수 있다. 게임, 금융 서비스, VoIP와 같이 실시간성이 중요한 서비스에 필수적이다.
- **Global Accelerator vs CloudFront (SAA 시험 단골 주제)**

| 구분 | Global Accelerator | Amazon CloudFront |
|-----|-------------------|------------------|
| 주요 목적 | 네트워크 경로 최적화<br>가용성 향상 | 콘텐츠 캐싱<br>전송 속도 향상 |
| 작동 레이어 | 레이어 4 (TCP / UDP) | 레이어 7 (HTTP / HTTPS) |
| 캐싱 | 캐싱 기능 없음 | 캐싱 기능 있음 (정적 콘텐츠) |
| 대상 (Origin) | ALB, NLB, EC2, 탄력적 IP | S3, ALB, EC2, 커스텀 HTTP 서버 |
| IP 주소 | 2개의 고정 정적 IP | 도메인 이름 기반 (IP 유동적) |


- 주요 사용 사례
  - 글로벌 게임 서버: 전 세계 플레이어들에게 낮은 지연 시간과 끊김 없는 연결을 제공해야 할 때.
  - 실시간 화상 회의 및 VoIP: 패킷 손실에 민감한 실시간 음성/영상 데이터를 전송할 때.


## AWS Snow Family

- 네트워크 대역폭이 부족하거나 보안상의 이유로 인터넷을 통해 데이터를 전송하기 어려운 환경에서, 물리적인 장치를 이용해 데이터를 AWS로 옮기거나 현장에서 직접 데이터를 처리(엣지 컴퓨팅)하기 위한 서비스군이다.
- 왜 Snow Family를 사용하는가?
  - 데이터 규모: 수십 테라바이트(TB)에서 페타바이트(PB) 단위의 데이터를 일반 인터넷 회선으로 보내면 몇 달이 걸릴 수 있다.
  - 네트워크 제약: 오지, 군부대, 선박, 광산 등 인터넷 연결이 불안정하거나 아예 없는 곳에서 발생한 데이터를 처리해야 할 때 사용한다.
  - 보안: 공용 인터넷망을 거치지 않고 데이터를 물리적으로 전달하여 보안을 강화한다.
- 주요 사용 시나리오
  - 데이터 이전 (Data Migration)
    - 수백 TB의 원본 데이터를 S3로 옮길 때 사용한다. 장치를 신청하면 택배로 배송되고, 데이터를 담아 다시 보내면 AWS 직원이 직접 S3 버킷으로 업로드해 준다.
  - 엣지 컴퓨팅 (Edge Computing)
    - 통신이 끊긴 현장에서 데이터를 수집하고 즉석에서 분석해야 할 때 사용한다.
    - 사례: 해상 유전에서 센서 데이터를 수집하여 즉시 분석하거나, 재난 지역에서 수집한 드론 영상을 실시간으로 처리할 때 Snowball Edge에 EC2 인스턴스를 띄워 사용할 수 있다.

## Amazon FSx

- AWS에서 제공하는 완전 관리형 고성능 파일 시스템 서비스다.
- EBS는 단일 인스턴스에 연결되는 블록 스토리지이고, S3는 웹 기반의 객체 스토리지라면, FSx는 여러 서버가 동시에 연결하여 사용하는 공유 파일 저장소의 성격을 가진다.
- Amazon FSx의 4가지 주요 타입
  - `FSx for Windows File Server`
    - 특징: Microsoft Windows 환경을 위한 완전한 호환성을 제공한다. SMB(Server Message Block) 프로토콜을 사용하며, Active Directory(AD)와 통합되어 권한을 관리한다.
    - 용도: 윈도우 기반 애플리케이션, 기업용 홈 디렉터리, 웹 콘텐츠 관리.
    - 기능: 데이터 중복 제거(Deduplication), Multi-AZ 배포를 통한 고가용성 보장.
  - `FSx for Lustre`
    - 특징: 수천 개의 컴퓨팅 인스턴스에서 동시에 데이터에 접근할 수 있는 고성능 병렬 파일 시스템이다. 초당 수백 GB의 처리량과 밀리초 미만의 지연 시간을 제공한다.
    - S3 통합: S3 버킷과 데이터를 동기화하여 사용할 수 있다. S3에 있는 대규모 데이터를 가져와 빠르게 연산하고 결과를 다시 S3에 저장하는 구조에 최적화되어 있다.
    - 용도: 머신러닝(ML), 고성능 컴퓨팅(HPC), 비디오 렌더링, 금융 모델링.
  - `FSx for NetApp ONTAP`
    - 특징: 온프레미스에서 널리 쓰이는 NetApp의 데이터 관리 기능을 AWS에서 그대로 사용한다. NFS, SMB뿐만 아니라 iSCSI까지 지원하는 멀티 프로토콜 스토리지다.
    - 용도: 기존 온프레미스 NetApp 환경을 클라우드로 그대로 마이그레이션할 때 가장 유리하다.
  - `FSx for OpenZFS`
    - 특징: 오픈 소스 ZFS 파일 시스템을 기반으로 하며, 매우 높은 IOPS와 낮은 지연 시간을 제공한다.
    - 용도: 데이터베이스, 스트리밍, 대규모 빌드 작업 등 극강의 성능이 필요한 리눅스 워크로드.
- "FSx는 '기존 파일 서버를 클라우드로 그대로 옮기거나(Windows), 미친 듯한 연산 성능이 필요할 때(Lustre)' 선택하는 서비스다. 리눅스 표준 공유 폴더가 필요하다면 EFS, 그 외의 특수 목적 고성능 파일 시스템은 FSx를 검토한다."


## Amazon Storage Gateway 

- 온프레미스 환경과 AWS 클라우드 스토리지를 연결하여 하이브리드 클라우드 스토리지를 구현하는 서비스다. 온프레미스 애플리케이션이 로컬 스토리지에 접근하는 것처럼 느끼게 하면서, 실제 데이터는 AWS의 S3, EBS, FSx 등에 안전하게 저장된다.
- 작동 방식
  - 온프레미스 데이터 센터에 가상 머신(VM)이나 하드웨어 어플라이언스를 설치하여 게이트웨이를 구성한다. 이 게이트웨이는 로컬 애플리케이션과 AWS 스토리지 사이에서 프로토콜 변환 및 데이터 캐싱 역할을 수행한다
- 3가지 주요 유형
  - `File Gateway (파일 게이트웨이)`
    - NFS나 SMB 프로토콜을 사용하여 S3 또는 FSx에 접근한다.
    - S3 File Gateway: 로컬 파일 시스템을 S3 버킷에 매핑한다. 파일은 S3의 객체로 저장되며, S3의 수명 주기 정책 등을 그대로 적용할 수 있다.
  - `Volume Gateway (볼륨 게이트웨이)`
    - iSCSI 프로토콜을 사용하여 데이터를 블록 스토리지 형태로 제공한다. 데이터는 S3에 저장되지만, 필요할 때 EBS 스냅샷으로 변환하여 EC2에 연결할 수 있다.
    - Cached Volumes: 데이터의 전체는 S3에 저장하고, 자주 쓰이는 데이터만 로컬에 캐싱한다. (로컬 스토리지 비용 절감)
    - Stored Volumes: 데이터 전체를 로컬에 저장하고, 비동기적으로 S3에 백업한다. (최소한의 지연 시간 보장)
  - `Tape Gateway (테이프 게이트웨이)`
    - 기존의 물리적 테이프 백업 장치(VTL, Virtual Tape Library)를 대체한다.
    - 특징: 백업 소프트웨어를 변경하지 않고도 기존의 테이프 기반 백업 인프라를 클라우드로 이전할 수 있다.
    - 저장: 데이터는 S3에 저장되며, 아카이빙된 테이프는 S3 Glacier Flexible Retrieval이나 Deep Archive로 이동하여 비용을 절감한다.



## AWS DataSync

- 온프레미스 스토리지와 AWS 스토리지 서비스 사이, 또는 AWS 서비스 간의 대량 데이터 이동을 단순화, 자동화 및 가속화하는 온라인 데이터 전송 서비스이다.
- 작동 원리 및 구성 요소
  - 에이전트 (Agent): 온프레미스 환경(VMware, Hyper-V 등)이나 EC2에 설치하는 가상 머신이다. 소스 스토리지에서 데이터를 읽거나 쓰는 역할을 수행한다.
  - 위치 (Location): 데이터의 시작점과 끝점이다. NFS, SMB, HDFS, S3, EFS, FSx 등이 위치가 될 수 있다.
  - 작업 (Task): 두 위치 간의 전송 설정(일정, 대역폭 제한, 필터링 등)을 정의하는 실행 단위이다.
- 주요 특징
  - 속도 및 효율성: AWS에서 설계한 전용 전송 프로토콜을 사용하여 네트워크 상태를 최적화한다. 단일 태스크로 최대 10Gbps의 속도를 낼 수 있으며, 오픈 소스 도구보다 최대 10배 빠르게 데이터를 전송한다.
  - 자동화: 데이터 전송 일정을 예약(Scheduling)할 수 있고, 전송 중인 데이터의 무결성을 자동으로 확인(Checksum)한다.
  - 보안: 모든 데이터는 전송 중에 TLS로 암호화되며, S3, EFS, FSx의 암호화 기능을 그대로 지원한다.
  - 증분 전송 (Incremental Transfer): 처음 한 번 전체 데이터를 복사한 후에는 변경된 부분만 골라서 전송하므로 네트워크 대역폭을 절약한다.
- 주요 사용 사례
  - 데이터 마이그레이션: 온프레미스의 방대한 데이터를 S3나 EFS로 신속하게 옮겨야 할 때 사용한다.
  - 분석용 데이터 수집: 온프레미스에서 생성되는 로그나 미디어 데이터를 분석을 위해 주기적으로 AWS 데이터 레이크(S3)로 보낸다.
  - 클라우드 간 이동: Google Cloud Storage나 Azure Blob Storage에 있는 데이터를 AWS로 이전할 때도 지원된다.
- **DataSync는 “파일 & 오브젝트(S3)”만 다룬다. 블록 스토리지(EBS)나 DB는 다루지 않는다.**

## DataSync vs Snow Family vs Storage Gateway

| 비교 항목 | AWS DataSync | AWS Snowball Edge | AWS Storage Gateway |
|----------|--------------|------------------|--------------------|
| 전송 방식 | 온라인 (네트워크 이용) | 오프라인 (물리 장비 배송) | 하이브리드 (지속적 연결) |
| 주요 용도 | 대량 데이터 마이그레이션<br>주기적 동기화 | 인터넷이 느린 환경에서의 대규모 이전 | 로컬에서 클라우드 데이터 실시간 접근 |
| 속도 제한 | 가용 네트워크 대역폭에 의존 | 장비 용량 및 배송 시간에 의존 | 로컬 캐시 속도에 의존 |
| 연결성 | 일시적 또는 주기적 태스크 실행 | 일회성 물리적 배송 | 영구적인 마운트 / 연결 유지 |


## AWS Transfer Family

- SFTP, FTPS, FTP, AS2와 같은 표준 파일 전송 프로토콜을 사용하여 Amazon S3 또는 Amazon EFS와 직접 데이터를 주고받을 수 있게 해주는 완전 관리형 서비스다.
- 전송된 파일은 사용자가 설정한 S3 버킷 또는 EFS 파일 시스템에 실시간으로 저장된다. 별도의 변환 과정이 필요 없으므로 S3의 수명 주기 정책이나 EFS의 고성능 파일 공유 기능을 즉시 활용할 수 있다.
- AWS가 인프라를 직접 관리하므로 사용자는 FTP 서버를 직접 구축하거나 패치를 관리할 필요가 없다. 요청량에 따라 자동으로 확장(Scaling)되며 고가용성을 보장한다.
- 주요 사용 사례
  - 레거시 마이그레이션: 기존 온프레미스 애플리케이션이 FTP 방식으로 파일을 저장하도록 설계되어 있다면, 코드 수정 없이 엔드포인트 주소만 AWS로 바꿔서 클라우드 이전을 완료한다.
  - B2B 데이터 교환: 협력사나 고객사가 기존에 쓰던 SFTP 클라이언트를 그대로 사용하여 데이터를 업로드하게 하고, 서버는 이를 받아 S3에서 즉시 분석한다.