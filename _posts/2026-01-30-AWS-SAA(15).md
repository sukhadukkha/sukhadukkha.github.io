---
layout: single
title:  "AWS SAA 준비(CloudWatch,EventBridge,CloudTrail,Config)"
categories: [AWS SAA]
tags: [AWS SAA]
toc: true
author_profile: true
---


## Amazon CloudWatch – Metrics & Logs & Agent & Alarms (활용 중심 정리)

* **CloudWatch란?**

    * AWS 리소스와 애플리케이션 상태를 **보고 → 기록하고 → 자동 대응**하기 위한 모니터링 서비스

---

* **CloudWatch Metrics**

    * 목적: **현재 상태를 숫자로 감시**

    * 특징

        * AWS 서비스들이 자동으로 지표 전송
        * 시간 기반(Time-series) 데이터

    * 활용 흐름

        * EC2, RDS, Lambda 등이 Metrics 전송
        * CPU, 요청 수, 오류 수 등을 그래프로 확인
        * 임계값 초과 시 Alarm 연동

    * 예시

        * CPU 사용률 80% 초과
        * → Alarm 발생
        * → Auto Scaling 또는 알림

    * 사용 목적

        * 성능 모니터링
        * 장애 감지
        * 자동 확장/축소 트리거

---

* **CloudWatch Logs**

    * 목적: **무슨 일이 있었는지 기록**

    * 특징

        * 로그 그룹 / 로그 스트림 구조
        * 중앙 집중식 로그 관리

    * 활용 흐름

        * 애플리케이션 로그 출력
        * CloudWatch Logs로 수집
        * 에러 메시지 및 요청 흐름 분석

    * 예시

        * 웹 서버 500 에러 발생
        * → 에러 로그 기록
        * → Logs에서 원인 분석

    * 사용 목적

        * 장애 원인 분석
        * 디버깅
        * 보안 감사

---

* **Logs → Metrics 연계 (Metric Filter)**

    * 로그의 특정 패턴을 감지해 **지표로 변환**

    * 예시

        * 로그에 "ERROR" 문자열 발생
        * → Metric Filter 생성
        * → ERROR 발생 횟수 Metrics 생성
        * → Alarm + SNS 알림

---

* **CloudWatch Agent**

    * 목적: **기본 Metrics로 수집되지 않는 정보 보완**

    * 특징

        * EC2 내부(OS 레벨)에서 동작
        * Metrics + Logs 모두 전송 가능

    * 기본 Metrics의 한계

        * 메모리 사용률 ❌
        * 디스크 사용량 ❌

    * Agent로 수집 가능

        * 메모리 사용률
        * 디스크 사용량
        * 커스텀 애플리케이션 로그

    * 활용 흐름

        * Agent 설치
        * IAM Role 권한 부여
        * 설정 파일로 수집 항목 지정

---

* **CloudWatch Alarms**

    * 목적: **조건 충족 시 자동 대응**

    * 활용 흐름

        * Metric 선택
        * 임계값 설정
        * 상태 변화 감지
        * 액션 실행

    * 가능한 액션

        * SNS 알림 전송
        * Auto Scaling 트리거
        * EC2 복구/중지

    * Alarm 상태

        * OK
        * ALARM
        * INSUFFICIENT_DATA

---

* **시험 자주 나오는 시나리오**

    * "CPU 사용률 기준 자동 확장"

        * Metrics + Alarm
    * "애플리케이션 에러 발생 시 알림"

        * Logs + Metric Filter + Alarm
    * "메모리 사용률 감시"

        * CloudWatch Agent

---

* **Metrics vs Logs 한 줄 정리**

    * Metrics → 상태 감시
    * Logs → 원인 분석

---

* **시험 핵심 포인트 요약**

    * 기본 Metrics로 메모리는 보이지 않는다 → Agent 필요
    * Logs는 바로 Alarm 불가 → Metric Filter 필요
    * Alarm은 반드시 Metric 기반
    * 자동 대응 문제의 정답은 대부분 Alarm 연계


## CloudWatch Insights & Operational Visibility

---

## CloudWatch Insights

* **CloudWatch Insights란?**

    * CloudWatch에 수집된 데이터를 **분석·시각화하여 원인을 파악**하기 위한 기능 모음
    * 단순 모니터링을 넘어 **문제 원인 분석(Why)**에 초점

---

### Log Insights

* **개념**

    * 로그 데이터를 쿼리하여 검색, 집계, 분석하는 기능

* **특징**

    * SQL 유사 쿼리 언어
    * 대량 로그 고속 분석

* **활용 예시**

    * 특정 에러 메시지 발생 횟수 조회
    * 응답 시간이 가장 긴 요청 식별

* **시험 포인트**

    * 로그 분석 / 검색 / 집계 → **Logs Insights**

---

### Contributor Insights

* **개념**

    * 시스템 문제에 **가장 크게 기여한 상위 원인(Top-N)** 분석

* **활용 예시**

    * 오류를 가장 많이 발생시킨 IP
    * 트래픽을 가장 많이 유발한 사용자

* **시험 포인트**

    * "가장 많이 문제를 일으킨 대상" → **Contributor Insights**

---

### Application Insights

* **개념**

    * 애플리케이션 구성 요소를 자동 인식하여 **이상 징후를 자동 감지**

* **특징**

    * 구성 요소 간 상관관계 자동 분석
    * 장애 원인 후보 자동 제시

* **시험 포인트**

    * 자동 감지 / 자동 분석 → **Application Insights**

---

### Container Insights

* **개념**

    * 컨테이너 환경의 **성능 및 리소스 사용률을 가시화**하는 Insights 기능

* **대상**

    * Amazon ECS
    * Amazon EKS
    * Kubernetes

* **수집 정보**

    * CPU / 메모리 사용률
    * 컨테이너, Pod, Cluster 단위 Metrics

* **시험 포인트**

    * 컨테이너 모니터링 → **Container Insights**

---

### Lambda Insights

* **개념**

    * Lambda 함수의 **성능과 실행 동작을 상세 분석**하는 기능

* **수집 정보**

    * 실행 시간
    * 메모리 사용량
    * 콜드 스타트 여부

* **활용 목적**

    * 성능 병목 분석
    * 메모리/타임아웃 최적화

* **시험 포인트**

    * Lambda 성능 분석 / 실행 상세 → **Lambda Insights**

---

## Operational Visibility

* **Operational Visibility란?**

    * 시스템 운영 상태를 **한눈에 파악**할 수 있는 능력
    * Observability의 핵심 목표

---

* **CloudWatch에서의 구성 요소**

    * Metrics: 현재 상태 숫자화
    * Logs: 발생한 사건 기록
    * Insights: 원인 분석
    * Alarms: 이상 감지 및 자동 대응
    * Dashboards: 통합 시각화

---

## 시험 핵심 요약

* Logs 분석 → **Logs Insights**
* Top 원인 분석 → **Contributor Insights**
* 자동 애플리케이션 분석 → **Application Insights**
* 컨테이너 모니터링 → **Container Insights**
* Lambda 성능 분석 → **Lambda Insights**
* 운영 가시성 확보 → **CloudWatch 전반**

---

## Amazon EventBridge (활용 중심 정리)

* **EventBridge란?**

    * AWS 서비스, 애플리케이션, SaaS에서 발생하는 **이벤트를 감지하고 전달하는 이벤트 기반 서비스**
    * 상태 변화에 반응하는 **Event-driven 아키텍처의 핵심**

---

* **핵심 구성 요소**

    * Event

        * 시스템에서 발생한 사건 또는 상태 변화
    * Rule

        * 특정 이벤트를 감지하는 조건 (이벤트 패턴)
    * Target

        * 이벤트 발생 시 실행할 대상

---

* **동작 흐름**

    * 이벤트 발생
    * EventBridge가 이벤트 수신
    * Rule이 이벤트 패턴 매칭
    * Target으로 이벤트 전달

---

* **이벤트 소스**

    * AWS 서비스 이벤트
    * 사용자 정의 애플리케이션 이벤트
    * SaaS 이벤트

---

* **Target 예시**

    * Lambda
    * SNS
    * SQS
    * Step Functions

---

* **언제 사용하는가?**

    * 리소스 상태 변경 자동 처리
    * 서비스 간 느슨한 결합
    * 서버리스 자동화

---

## Resource-based Policy (EventBridge 연계)

* **Resource-based Policy란?**

    * IAM 사용자/역할이 아니라 **리소스 자체에 직접 부착하는 정책**
    * "이 리소스를 누가 사용할 수 있는가"를 정의

---

* **EventBridge에서의 역할**

    * 다른 AWS 계정의 EventBridge가

        * 내 Event Bus로 이벤트를 보내도록 허용할 때 사용
    * Event Bus에 Resource-based Policy 필요

---

* **핵심 특징**

    * Principal을 정책에 직접 명시
    * Cross-account 이벤트 전달 가능

---

* **시험 포인트**

    * 다른 계정 → EventBridge 이벤트 전달
    * → Resource-based Policy 필요

---

## Schema Registry (EventBridge 연계)

* **Schema Registry란?**

    * EventBridge에서 사용하는 **이벤트 데이터 구조(Schema)를 중앙 관리**하는 기능

---

* **왜 필요한가?**

    * 이벤트 구조 변경 시
    * 소비자 애플리케이션 장애 방지

---

* **주요 기능**

    * 이벤트 스키마 저장
    * 버전 관리
    * 스키마 자동 탐지

---

* **EventBridge와의 관계**

    * EventBridge 이벤트 구조를 Schema로 등록
    * Producer / Consumer 간 계약 역할

---

* **시험 포인트**

    * 이벤트 구조 관리 → Schema Registry
    * 여러 서비스가 같은 이벤트 소비 → Schema Registry

---

## 시험 핵심 요약

* EventBridge

    * 사건 기반 자동화
* Resource-based Policy

    * Cross-account 이벤트 허용
* Schema Registry

    * 이벤트 구조 안정성 확보

---

## AWS CloudTrail

---

* **CloudTrail이란?**

    * AWS 계정 내에서 발생하는 **API 호출과 사용자 활동을 기록**하는 서비스
    * "누가(Who), 언제(When), 무엇을(What) 했는가"를 추적

---

* **무엇을 기록하나?**

    * AWS Management Console 활동
    * AWS CLI / SDK를 통한 API 호출
    * IAM 사용자 및 역할 활동

---

* **기록되는 정보**

    * 호출한 주체 (IAM User / Role)
    * 호출 시간
    * 호출된 서비스 및 API
    * 요청 파라미터
    * 결과 (성공 / 실패)
    * 소스 IP 주소

---

* **CloudTrail Log 저장 위치**

    * 기본

        * Event History (최근 90일)
    * 장기 보관

        * S3 버킷에 로그 저장
        * 선택적으로 CloudWatch Logs로 전달 가능

---

* **이벤트 유형**

    * Management Events

        * 리소스 생성, 수정, 삭제
        * 기본적으로 활성화
    * Data Events

        * S3 객체 접근
        * Lambda 함수 실행
        * 비용 발생 (선택)
    * Insights Events

        * 비정상적인 API 활동 감지

---

* **활용 목적**

    * 보안 감사 (Audit)
    * 규정 준수 (Compliance)
    * 사고 원인 분석

---

* **CloudWatch / EventBridge 연계**

    * CloudTrail 로그 → CloudWatch Logs

        * 실시간 알림 및 모니터링
    * CloudTrail 이벤트 → EventBridge

        * 특정 API 호출 발생 시 자동 대응

---

* **쉬운 예시**

    * 누군가 S3 버킷을 삭제
    * → CloudTrail에 API 호출 기록
    * → EventBridge 감지
    * → SNS로 보안 알림

---

* **시험 자주 나오는 유형**

    * "누가 리소스를 삭제했는가?"
    * "API 호출 이력 추적"
    * "보안 감사 로그 필요"

---

* **CloudWatch와 차이**

    * CloudWatch

        * 성능 / 상태 모니터링
    * CloudTrail

        * 사용자 및 API 활동 기록

---

* **시험 핵심 포인트 요약**

    * CloudTrail = API Activity Log
    * 보안 감사 목적
    * Who / When / What
    * EventBridge 연계 자동 대응 가능


--- 

## AWS Config

---

* **AWS Config란?**

    * AWS 리소스의 **구성(Configuration) 변경 이력을 기록하고 평가**하는 서비스
    * "리소스가 어떤 상태였는가"를 시간 흐름에 따라 추적

---

* **CloudTrail과의 핵심 차이**

    * CloudTrail

        * 누가(Who) / 언제(When) / 어떤 API를(What)
        * **행위(Activity) 중심**
    * AWS Config

        * 리소스가 **어떤 설정 상태였는가**
        * **구성(Configuration) 중심**

---

* **무엇을 기록하나?**

    * 리소스 생성 / 수정 / 삭제 시점의 설정 값
    * 변경 전·후 구성 스냅샷

---

* **주요 기능**

    * Configuration History

        * 리소스 설정 변경 이력 조회

    * Configuration Snapshot

        * 특정 시점의 전체 리소스 구성 상태 저장

    * Config Rules

        * 리소스 설정이 규칙을 준수하는지 평가

---

* **Config Rules**

    * AWS 관리형 규칙

        * 예: S3 버킷 퍼블릭 차단 여부
    * 사용자 정의 규칙

        * Lambda 기반 커스텀 규칙

---

* **평가 결과 상태**

    * COMPLIANT
    * NON_COMPLIANT
    * NOT_APPLICABLE

---

* **활용 목적**

    * 규정 준수 (Compliance)
    * 보안 정책 강제
    * 리소스 변경 추적

---

* **쉬운 예시**

    * 보안 규칙: 모든 S3 버킷은 퍼블릭 차단
    * → Config Rule 평가
    * → 위반 시 NON_COMPLIANT

---

* **EventBridge 연계**

    * 리소스가 NON_COMPLIANT 상태로 변경
    * → EventBridge 감지
    * → Lambda 실행 또는 알림

---

* **시험 자주 나오는 유형**

    * "리소스 설정 변경 이력 필요"
    * "규정 준수 여부 지속 평가"
    * "과거 특정 시점의 구성 상태 확인"

---

* **시험 핵심 포인트 요약**

    * AWS Config = Configuration History
    * 행위 추적 ❌ → CloudTrail
    * 설정 상태 추적 ⭕
    * Compliance 문제의 정답 후보

---

## ELB 활용 예시로 보는 CloudWatch vs CloudTrail vs AWS Config

* **상황**

    * Application Load Balancer(ALB)를 운영 중

---

* **CloudWatch (상태/성능 관점)**

    * 보는 것: "지금 잘 동작하고 있는가?"
    * 예시

        * ALB 요청 수(RequestCount)
        * 대상 그룹(Target Group) 에러율
        * 지연 시간(Latency)
    * 질문 형태

        * "트래픽이 급증했는가?"
        * "에러율이 높아졌는가?"

---

* **CloudTrail (행위 관점)**

    * 보는 것: "누가 무엇을 했는가?"
    * 예시

        * 누군가 ALB 리스너 설정을 수정
        * 누군가 ALB를 삭제
    * 질문 형태

        * "누가 로드밸런서 설정을 변경했는가?"
        * "언제 삭제 API가 호출되었는가?"

---

* **AWS Config (구성 관점)**

    * 보는 것: "리소스가 어떤 상태였는가?"
    * 예시

        * ALB가 특정 시점에 HTTPS 리스너를 사용했는지
        * 보안 그룹이 규칙을 준수했는지
    * 질문 형태

        * "어제 이 로드밸런서는 어떤 설정이었는가?"
        * "보안 규칙을 위반한 적이 있는가?"

---

## 시험 한 방 정리 (ELB 기준)

* 트래픽/지연/에러 → **CloudWatch**
* 누가 수정/삭제 → **CloudTrail**
* 설정 이력/규정 준수 → **AWS Config**
