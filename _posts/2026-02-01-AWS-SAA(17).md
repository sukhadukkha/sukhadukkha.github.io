---
layout: single
title:  "AWS SAA 준비(KMS,SSM Parameter Store,ACM,CloudHSM)"
categories: [AWS SAA]
tags: [AWS SAA]
toc: true
author_profile: true
---


## AWS KMS (Key Management Service)

### 개요

* AWS에서 암호화 키를 생성, 관리, 제어하는 관리형 서비스
* S3, EBS, RDS, Lambda, SQS 등 다수의 AWS 서비스와 기본 통합
* 시험에서는 대칭키(Symmetric Key)가 가장 중요

---

### 주요 개념

* KMS Key (구 CMK)

  * AWS Managed Key: AWS가 관리 (예: aws/s3)
  * Customer Managed Key: 사용자가 직접 관리 (시험 핵심)
  * Imported Key: 외부에서 생성한 키를 가져와 사용

* 암호화 방식

  * Envelope Encryption 구조
  * 실제 데이터는 Data Key로 암호화
  * Data Key는 KMS Key로 암호화

* Key Rotation

  * Customer Managed Key만 자동 회전 가능 (1년 주기)
  * AWS Managed Key는 AWS가 자동 관리

---

### 권한 관리

* Key Policy

  * KMS 접근 제어의 최우선 정책
  * IAM Policy만으로는 KMS 접근 불가

* IAM Policy

  * Key Policy에서 허용된 경우에만 의미 있음

---

### 보안 및 감사

* CloudTrail로 모든 KMS API 호출 기록
* HSM 기반 보안 (FIPS 140-2)

---

### 시험 포인트

* 민감 데이터 암호화 및 키 직접 제어 필요 시 KMS 사용
* S3, EBS 암호화 키 관리 문제는 KMS 연동 여부 확인
* Key Policy 설정이 없으면 접근 불가

---

## 2 AWS SSM Parameter Store

### 개요

* 설정 값 및 비밀 정보를 저장하는 서비스
* AWS Systems Manager의 일부
* 환경 변수, DB 비밀번호, API Key 관리에 사용

---

### 파라미터 유형

* String

  * 일반 텍스트 값

* SecureString

  * KMS로 암호화된 값
  * 비밀번호, 토큰 등 민감 정보 저장

---

### 계층 구조

* 슬래시(/) 기반 계층 관리 가능
* 예시

  * /app/prod/db/password
  * /app/dev/db/password

---

### 요금 및 제한

* Standard Tier

  * 최대 4KB
  * 버전 관리 미지원
  * 무료

* Advanced Tier

  * 최대 8KB
  * 버전 관리 지원
  * 유료

---

### 접근 제어

* IAM Policy로 접근 제어
* SecureString 사용 시 KMS 권한 추가 필요

---

### Parameter Store vs Secrets Manager

* Parameter Store

  * 비용 저렴 또는 무료
  * 자동 로테이션 미지원
  * 설정 값 또는 간단한 비밀 정보

* Secrets Manager

  * 비용 발생
  * 자동 비밀번호 로테이션 지원
  * DB 자격 증명 등 보안 중요 정보

---

### 시험 포인트

* 환경 변수 및 설정 값 관리 문제는 Parameter Store
* KMS로 암호화된 설정 값은 SecureString
* 자동 비밀번호 교체 요구 시 Secrets Manager

---

## 3 KMS와 Parameter Store 조합

* SecureString은 KMS Key로 암호화됨
* 접근 흐름

  * Parameter Store에 SecureString 저장
  * KMS Key로 암호화
  * IAM Policy와 KMS Key Policy 모두 허용 필요

---

## SAA 한 줄 요약

* 암호화 키 관리: KMS
* 설정 및 비밀 값 저장: Parameter Store
* 자동 비밀번호 로테이션: Secrets Manager


---


## AWS Secrets Manager

### 개요
- 비밀 정보를 안전하게 저장하고 관리하는 전용 서비스
- DB 비밀번호, API Key, 토큰 등 고보안 정보 관리에 사용
- Parameter Store보다 보안 및 자동화 기능이 강화됨

---

### 저장 대상
* RDS / Aurora / Redshift DB 자격 증명
* API Key, OAuth Token
* 외부 서비스 인증 정보

---

### 핵심 기능 (시험 중요)

* 자동 비밀번호 로테이션
  - Lambda와 연동하여 비밀번호 주기적 자동 변경
  - RDS, Aurora는 기본 로테이션 템플릿 제공
  - Parameter Store에는 없는 기능

* KMS 기반 암호화
  - Secret 값은 자동으로 KMS Key로 암호화
  - Customer Managed Key 사용 가능

* 버전 관리
  - Secret 변경 시 자동 버전 생성
  - 이전 버전으로 롤백 가능

---

### 접근 제어

- IAM Policy로 접근 제어
- Resource Policy 지원 (계정 간 접근 가능)
- KMS Key Policy 권한 필요

---

### 요금
- 유료 서비스
- Secret 개수 및 API 호출 수 기준 과금
- 비용이 중요한 경우 Parameter Store 고려

---

### Parameter Store와 비교 (시험 단골)

- Secrets Manager
  - 유료
  - 자동 비밀번호 로테이션 지원
  - DB 자격 증명에 적합

- Parameter Store
  - 무료 또는 저렴
  - 자동 로테이션 미지원
  - 설정 값 및 간단한 비밀 정보 저장

---

### 시험 포인트

- DB 비밀번호를 주기적으로 자동 변경해야 한다
  - Secrets Manager

- 애플리케이션에 비밀번호를 하드코딩하면 안 된다
  - Secrets Manager 또는 Parameter Store
  - 자동 로테이션 필요 여부로 선택

- 보안 요구 사항이 높고 운영 자동화가 필요하다
  - Secrets Manager

---

### 한 줄 요약
- 자동 비밀번호 로테이션이 필요하면 Secrets Manager


---

## AWS ACM (AWS Certificate Manager)

### 개요
- SSL/TLS 인증서를 생성, 관리, 배포하는 관리형 서비스
- HTTPS 통신을 위한 인증서를 손쉽게 적용 가능
- 인증서 발급, 갱신, 배포를 AWS가 자동 관리

---

### 주요 용도
* 웹 사이트 HTTPS 적용
* ALB / NLB / CloudFront의 TLS 종료(TLS Termination)
* 인증서 만료 관리 자동화

---

### 지원 서비스 (시험 중요)

- Application Load Balancer (ALB)
- Network Load Balancer (NLB)
- CloudFront
- API Gateway

---

### 인증서 종류

* Public Certificate
  - 인터넷 공개 서비스용 인증서
  - ACM에서 무료 제공
  - 자동 갱신 지원

* Private Certificate
  - 내부 시스템용 인증서
  - ACM Private CA 필요 (유료)

---

### 인증서 발급 방식

* DNS Validation (권장, 시험 핵심)
  - Route 53 사용 시 자동 검증 가능
  - 인증서 자동 갱신 가능

* Email Validation
  - 인증서 요청 시 지정된 이메일로 승인
  - 자동 갱신 불가 (시험에서 잘 안 씀)

---

### 리전 및 범위 주의사항 (시험 단골)

- ACM 인증서는 **리전 단위**
- 단, CloudFront용 인증서는 반드시 **us-east-1**에서 생성

---

### 자동 갱신

- DNS Validation 방식 사용 시 자동 갱신
- 사용자는 만료 관리 신경 쓸 필요 없음

---

### 접근 제어

- IAM Policy로 인증서 관리 권한 제어
- 인증서 Private Key는 사용자에게 노출되지 않음

---

### 제한 사항

- EC2에 직접 인증서 설치 불가
- 온프레미스 서버에서 직접 사용 불가
- ALB, CloudFront 등 AWS 관리 서비스에서만 사용

---

### 시험 포인트 정리

- HTTPS 적용 + 인증서 자동 갱신 필요
  - ACM

- CloudFront HTTPS 인증서
  - us-east-1에서 ACM 인증서 생성

- 외부 서버 또는 EC2 직접 인증서 설치
  - ACM 사용 불가 (외부 인증서 필요)

---

### 한 줄 요약
- AWS 서비스에 HTTPS를 쉽게 적용하려면 ACM


---

## AWS CloudHSM

### 개요
- 사용자가 직접 암호화 키를 완전히 제어하는 하드웨어 보안 모듈(HSM) 서비스
- FIPS 140-2 Level 3 인증
- 규제, 컴플라이언스 요구 사항이 매우 높은 환경에서 사용

---

### 핵심 개념

* 전용 HSM 장비 제공
  - 고객 전용 단일 테넌트 HSM
  - AWS는 키에 접근 불가

* 키 완전 통제
  - 키 생성, 저장, 사용, 삭제 모두 사용자 책임
  - AWS KMS보다 훨씬 낮은 수준까지 제어 가능

---

### KMS와 가장 큰 차이 (시험 핵심)

- KMS
  - 완전 관리형 서비스
  - AWS가 HSM 인프라 관리
  - 키 사용은 API 호출 방식
  - 운영 편함

- CloudHSM
  - 사용자가 HSM 직접 운영
  - 키 분실 시 복구 불가
  - 운영 부담 큼

---

### 네트워크 및 아키텍처

* VPC 내부에서만 접근 가능
- HSM은 VPC에 배치됨
- EC2, Lambda 등에서 클라이언트로 접근

---

### 지원 암호 연산

- 대칭키, 비대칭키 (RSA, ECC)
- 디지털 서명
- 키 해시 연산

---

### 가용성

- 고가용성을 위해 다중 AZ 클러스터 구성 필수
- 단일 HSM 사용은 시험에서 오답 가능성 높음

---

### 접근 제어

- IAM이 아닌 HSM 사용자 계정 기반
- HSM 관리자, Crypto User 개념 존재

---

### 사용 사례

- 금융권, 정부, 규제 산업
- BYOK (Bring Your Own Key) 강력 요구
- 키에 AWS가 접근하면 안 되는 경우

---

### 시험 포인트

- “AWS도 키에 접근하면 안 된다”
  - CloudHSM

- “완전한 키 소유권”
  - CloudHSM

- “운영 오버헤드 최소화”
  - KMS (CloudHSM 아님)

---

### 한 줄 요약
- AWS조차 키를 보면 안 되는 상황 → CloudHSM

