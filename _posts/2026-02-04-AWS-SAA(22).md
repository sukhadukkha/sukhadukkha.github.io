---
layout: single
title:  "AWS SAA 준비(Disaster Recovery, DRS, DMS, RDS & Aurora Migration, AWS Backup)"
categories: [AWS SAA]
tags: [AWS SAA]
toc: true
author_profile: true
---


## Disaster Recovery in AWS

---

## 1. Disaster Recovery (DR) 개요

- 장애, 재해 발생 시 **서비스를 빠르게 복구**하기 위한 전략
- AWS는 **가용 영역(AZ)·리전 분리**를 통해 DR 설계 가능

---

## 2. DR 핵심 지표 (시험 중요)

- **RPO (Recovery Point Objective)**
    - 허용 가능한 데이터 손실 범위
    - 예: RPO 5분 → 최대 5분 전 데이터까지 허용

- **RTO (Recovery Time Objective)**
    - 서비스 복구까지 허용 시간
    - 예: RTO 1시간 → 1시간 내 복구 필요

---

## 3. AWS DR 전략 4단계 (중요)

### 3.1 Backup & Restore

- 가장 기본적이고 비용 저렴
- 주기적으로 백업 후 재복구

**특징**
- RTO: 길다
- RPO: 길다
- 비용: 낮음

**예시**
- EBS Snapshot
- RDS Snapshot
- S3 Cross-Region Replication

---

### 3.2 Pilot Light

- 핵심 인프라만 **최소한으로 상시 실행**
- 평소에는 비활성 상태

**특징**
- RTO: 중간
- RPO: 중간
- 비용: 중간

**예시**
- DB는 상시 실행
- EC2는 AMI만 유지

---

### 3.3 Warm Standby

- 축소된 규모의 **운영 환경을 항상 실행**
- 장애 시 Scale-out

**특징**
- RTO: 짧음
- RPO: 짧음
- 비용: 높음

**예시**
- 최소 ASG 상시 유지
- DB 복제 구성

---

### 3.4 Multi-Site (Active/Active)

- 두 리전에서 **동시에 서비스 운영**
- 장애 시 트래픽 자동 전환

**특징**
- RTO: 거의 0
- RPO: 거의 0
- 비용: 가장 높음

**예시**
- Route 53 Failover / Latency Routing
- 글로벌 사용자 대상 서비스

---

## 4. DR 전략 비교 요약

| 전략 | RTO | RPO | 비용 |
|------|-----|-----|------|
| Backup & Restore | 김 | 김 | 낮음 |
| Pilot Light | 중간 | 중간 | 중간 |
| Warm Standby | 짧음 | 짧음 | 높음 |
| Multi-Site | 매우 짧음 | 매우 짧음 | 매우 높음 |

---

## 5. AWS 서비스와 DR 연계

- Route 53: 헬스체크 & Failover
- S3: Cross-Region Replication
- RDS: Multi-AZ / Read Replica
- DynamoDB: Global Tables
- EC2: AMI, Auto Scaling

---

## 6. 시험 시나리오 포인트

- **비용 최소화 + 복구 가능** → Backup & Restore
- **빠른 복구 + 비용 절충** → Pilot Light / Warm Standby
- **무중단 서비스** → Multi-Site

---

## 7. 한 줄 요약

- **DR = RTO/RPO + 비용의 균형**
- 요구사항에 맞는 전략 선택이 핵심

---

## AWS Elastic Disaster Recovery (DRS)

---

## 1. DRS 개요

- **온프레미스 / 타 AWS / 다른 클라우드**의 서버를  
  **AWS로 빠르게 복구**하기 위한 관리형 DR 서비스
- 서버 단위 **실시간 블록 레벨 복제** 제공

---

## 2. 무엇을 해결해주나?

- 기존 환경을 그대로 유지한 채
- 장애 발생 시 **몇 분 내 AWS에서 서버 기동**

→ 낮은 **RTO / RPO** 달성

---

## 3. 동작 방식

Source Server<br>
(On-Prem / Other Cloud)<br>
↓<br>
Replication Agent<br>
↓ (Continuous Replication)<br>
Staging Area (Low-cost EC2 + EBS)<br>
↓<br>
Recovery EC2 (Failover 시)<br>


---

## 4. 주요 특징 (시험 중요)

- **Continuous Replication**
    - 거의 실시간 데이터 동기화
- **블록 단위 복제**
- OS / 애플리케이션 무관
- 테스트 복구 가능 (실서비스 영향 없음)

---

## 5. 구성 요소

- Replication Agent
- Staging Area Subnet
- Recovery Instance (Failover 시 생성)

---

## 6. DR 전략에서의 위치

- **Pilot Light / Warm Standby** 구현에 적합
- 기존 백업 방식보다 빠른 복구

---

## 7. DRS vs 기존 DR 방식

| 항목 | AWS DRS | Snapshot / Backup |
|------|---------|-------------------|
| RTO | 매우 짧음 | 김 |
| RPO | 매우 짧음 | 김 |
| 복제 방식 | 실시간 | 주기적 |
| 자동화 | 높음 | 낮음 |

---

## 8. 시험 시나리오 예시

- 온프레미스 서버
- 빠른 복구 필요
- AWS로 DR 이전

→ **AWS DRS**

---

## 9. 한 줄 요약

- **AWS DRS = 서버를 통째로 실시간 복제하는 DR 서비스**

![구조](/assets/images/DRS.png)


--- 

## AWS Database Migration Service (DMS)

---

## 1. AWS DMS 개요

- 데이터베이스를 **AWS로 마이그레이션**하거나
- DB 간 데이터를 **중단 최소화**로 이전하는 서비스
- **동기화(Continuous Replication)** 지원

---

## 2. 언제 사용하나?

- 온프레미스 DB → AWS DB 이전
- 상용 DB → 오픈소스 DB 이전
- 리전 간 DB 복제
- DR / 데이터 통합 목적

---

## 3. 지원 마이그레이션 유형

### Homogeneous Migration
- 같은 DB 엔진 간 이동  
  예: MySQL → MySQL

### Heterogeneous Migration
- 다른 DB 엔진 간 이동  
  - 예: Oracle → Aurora MySQL

👉 이 경우 **AWS SCT(Schema Conversion Tool)** 함께 사용

---

## 4. 동작 방식

Source DB<br>
↓<br>
DMS Replication Instance<br>
↓<br>
Target DB (RDS / Aurora / EC2 DB)<br>



- 초기 전체 로드
- 이후 **CDC (Change Data Capture)** 로 변경분 동기화


---


## 5. 핵심 구성 요소


- **Source Endpoint**
  - 원본 DB 정보


- **Target Endpoint**
  - 대상 DB 정보


- **Replication Instance**
  - 실제 데이터 복제 수행


---


## 6. 중단 최소화 (시험 중요)


- 마이그레이션 중에도
  - 기존 DB 계속 사용 가능
- 최종 전환 시 짧은 다운타임


---


## 7. 지원 대상


- 온프레미스 DB
- EC2 기반 DB
- RDS / Aurora
- 일부 SaaS DB


---


## 8. DMS vs DRS (시험 단골 비교)


| 항목 | DMS | DRS |
|------|-----|-----|
| 대상 | 데이터베이스 | 서버 전체 |
| 복제 단위 | 데이터 | 블록/서버 |
| 목적 | DB 마이그레이션 | 재해 복구 |
| 실시간 복제 | ⭕ | ⭕ |


---


## 9. 시험 시나리오 예시


- DB 이전 중 서비스 중단 최소화
- 데이터 지속 동기화 필요


→ **AWS DMS**


---


## 10. 한 줄 요약


- **DMS = 데이터베이스 무중단 마이그레이션 도구**
- 이기종 DB 이전 시 **SCT와 함께 사용**

![구조](/assets/images/DMS.png)


---


## RDS & Aurora MySQL Migration 정리

---

## 1. RDS MySQL → Aurora MySQL

### Option 1: RDS Snapshot 복원
- RDS MySQL의 **DB Snapshot 생성**
- 해당 Snapshot을 사용해 **Aurora MySQL DB로 복원**

**특징**
- 가장 단순한 방식
- 다운타임 발생
- 소규모 / 비운영 환경에 적합

---

### Option 2: Aurora Read Replica 사용 (권장)

- RDS MySQL로부터 **Aurora MySQL Read Replica 생성**
- Replication Lag이 0이 되면
- 해당 Replica를 **독립 Aurora DB Cluster로 승격(Promote)**

**특징**
- 다운타임 최소화
- 비용 및 시간 소요 있음
- 운영 환경에 적합
- **SAA 시험 단골**

---

## 2. External MySQL → Aurora MySQL
(온프레미스 / EC2 MySQL 등)

### Option 1: S3 + Percona XtraBackup (빠름)

- **Percona XtraBackup**으로 MySQL 파일 백업
- 백업 파일을 **Amazon S3에 업로드**
- S3를 소스로 **Aurora MySQL DB 생성**

**특징**
- 대용량 DB에 적합
- mysqldump보다 빠름
- Aurora 전용 기능

---

### Option 2: mysqldump 사용 (단순하지만 느림)

- Aurora MySQL DB 먼저 생성
- **mysqldump**로 데이터 덤프 후 Import

**특징**
- 가장 단순
- 대용량일수록 매우 느림
- 테스트 / 소규모 DB에 적합

---

## 3. AWS DMS 사용

- **Source DB와 Target DB가 모두 실행 중일 때**
- 초기 Full Load 후
- **CDC(Change Data Capture)** 로 변경 데이터 동기화

**특징**
- 다운타임 최소화
- 운영 환경 마이그레이션에 적합
- RDS / Aurora 모두 지원

---

## 4. 시험 선택 가이드 (중요)

| 상황 | 정답 |
|----|----|
| RDS MySQL → Aurora, 다운타임 최소화 | Aurora Read Replica |
| External MySQL → Aurora, 대용량 | S3 + Percona |
| 소규모 / 단순 이전 | mysqldump |
| 운영 중 무중단 이전 | DMS |

---

## 5. 한 줄 요약

- **RDS → Aurora**: Read Replica 방식이 베스트
- **External → Aurora**: S3(Percona) > mysqldump
- **무중단**: DMS

---

## AWS Backup

---

## 1. AWS Backup 개요

- 여러 AWS 서비스의 **백업을 중앙에서 관리**하는 관리형 서비스
- 백업 정책을 **한 번 정의**하고 여러 리소스에 **일관되게 적용**

---

## 2. 지원 리소스 (시험 중요)

- Amazon EC2 / EBS
- Amazon RDS / Aurora
- Amazon DynamoDB
- Amazon EFS
- Amazon FSx
- Amazon S3

---

## 3. 핵심 구성 요소

### Backup Plan
- 백업 주기, 보존 기간 정의
- 스케줄 기반 자동 백업

### Backup Vault
- 백업 저장소
- 암호화 및 접근 제어

### Resource Assignment
- 태그 기반 또는 리소스 직접 지정

---

## 4. 주요 기능

- **중앙 집중식 백업 관리**
- 태그 기반 백업 적용
- Cross-Region / Cross-Account 백업
- 백업 암호화 (KMS)
- 백업 수명 주기 관리 (Lifecycle)

---

## 5. AWS Backup vs Snapshot

| 항목 | AWS Backup | Snapshot |
|------|-----------|----------|
| 관리 방식 | 중앙 관리 | 개별 리소스 |
| 자동화 | ⭕ | 제한적 |
| 태그 기반 | ⭕ | ❌ |
| Cross-Region | ⭕ | 수동 |
| 정책 적용 | ⭕ | ❌ |

---

## 6. 시험 시나리오 예시

- 여러 계정/리전에 걸친 백업 관리
- 규정 준수(Compliance) 요구
- 백업 정책 표준화 필요

→ **AWS Backup**

---

## 7. 주의 사항 (시험)

- **백업 ≠ 고가용성**
- 복구 시 리소스 재생성 필요
- 실시간 복제 아님

---

## 8. 한 줄 요약

- **AWS Backup = 모든 AWS 리소스 백업을 한 곳에서 관리**